<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../assets/imagens-hectare/favicon.png" type="image/x-icon">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/hectare.css">
    <title>Hectares</title>
</head>

<body onload="BuscarHectares()">
    <div class="hectare-container">
        <aside class="menu-lateral">
            <section class="sessao botoes-principais">
                <button class="botao-menu material-symbols-outlined"
                onclick="navegar('')">Account_Circle</button>
                <button class="botao-menu home material-symbols-outlined"
                    onclick="navegar('propriedade.html')">Home</button>
                <button class="botao-menu material-symbols-outlined"
                    onclick="navegar('../manual_de_instalacao/manual.html')">Import_Contacts</button>
            </section>
            <section class="sessao sair">
                <button class="botao-menu material-symbols-outlined" onclick="navegar('../login.html')">Logout</button>
            </section>
        </aside>
        <aside class="caixa-conteudo">
            <header class="cabecalho">
                <div class="caixa-auxiliar-titulo-cabecalho">
                    <section class="sessao-voltar">
                        <span class="botao-cabecalho material-symbols-outlined" onclick="navegar('propriedade.html')">
                            Arrow_Back
                        </span>
                    </section>
                    <section class="sessao-titulo-cabecalho">
                        <h1 class="titulo-cabecalho">Hectares - Fazenda</h1>
                    </section>
                    <section class="sessao-notificacao-cabecalho">
                        <span class="botao-cabecalho material-symbols-outlined"
                            onclick="mostrarNotificacoes()">Notifications</span>
                    </section>
                </div>
            </header>
            <div class="caixa-notificacoes" id="notificacoes">
                <header class="cabecalho-notificacoes">
                    <h4>Notificações</h4>
                    <h4 class="fechar-notificacoes" onclick="mostrarNotificacoes()">X</h4>
                </header>
                <section class="lista-notificacao">
                    <div class="notificacoes" id="notificacao1">
                        <span class="nivel-notificacao-ruim material-symbols-outlined">Warning</span>
                        <section class="descricao-notificacao">
                            <p onclick="excluirNotificacao(notificacao1)" class="excluir-notificacao">X</p>
                            <p>Hectare 1 está em estado de alerta!</p>
                            <p>16/05/2024</p>
                        </section>
                    </div>
                    <div class="notificacoes" id="notificacao2">
                        <span class="nivel-notificacao-ruim material-symbols-outlined">Warning</span>
                        <section class="descricao-notificacao">
                            <p onclick="excluirNotificacao(notificacao2)" class="excluir-notificacao">X</p>
                            <p>Hectare 2 está em estado de alerta!</p>
                            <p>16/05/2024</p>
                        </section>
                    </div>
                    <div class="notificacoes" id="notificacao3">
                        <span class="nivel-notificacao-medio material-symbols-outlined">Error</span>
                        <section class="descricao-notificacao">
                            <p onclick="excluirNotificacao(notificacao3)" class="excluir-notificacao">X</p>
                            <p>Hectare 4 está em estado de atenção!!</p>
                            <p>16/05/2024</p>
                        </section>
                    </div>
                    <div class="notificacoes" id="notificacao3">
                        <span class="nivel-notificacao-medio material-symbols-outlined">Error</span>
                        <section class="descricao-notificacao">
                            <p onclick="excluirNotificacao(notificacao3)" class="excluir-notificacao">X</p>
                            <p>Hectare 4 está em estado de atenção!!</p>
                            <p>16/05/2024</p>
                        </section>
                    </div>
                    <div class="notificacoes" id="notificacao3">
                        <span class="nivel-notificacao-medio material-symbols-outlined">Error</span>
                        <section class="descricao-notificacao">
                            <p onclick="excluirNotificacao(notificacao3)" class="excluir-notificacao">X</p>
                            <p>Hectare 4 está em estado de atenção!!</p>
                            <p>16/05/2024</p>
                        </section>
                    </div>
                    <div class="notificacoes" id="notificacao3">
                        <span class="nivel-notificacao-medio material-symbols-outlined">Error</span>
                        <section class="descricao-notificacao">
                            <p onclick="excluirNotificacao(notificacao3)" class="excluir-notificacao">X</p>
                            <p>Hectare 4 está em estado de atenção!!</p>
                            <p>16/05/2024</p>
                        </section>
                    </div>
                    <div class="notificacoes" id="notificacao3">
                        <span class="nivel-notificacao-medio material-symbols-outlined">Error</span>
                        <section class="descricao-notificacao">
                            <p onclick="excluirNotificacao(notificacao3)" class="excluir-notificacao">X</p>
                            <p>Hectare 4 está em estado de atenção!!</p>
                            <p>16/05/2024</p>
                        </section>
                    </div>
                </section>
            </div>
            <div class="sessao-conteudo-hectare">
                <section class="sessao-kpi">
                    <p>Porcentagem de hectares em situação crítica</p>
                    <div class="porcentagem-kpi vermelho">0%</div>
                    <p>Porcentagem de hectares em atenção</p>
                    <div class="porcentagem-kpi amarelo">0%</div>
                    <p>Porcentagem de hectares condições ideais</p>
                    <div class="porcentagem-kpi verde">10%</div>
                </section>
                <section class="sessao-lista-hectares">
                    <div class="lista-hectares" id="ListaHectares">

                    </div>
                </section>
                <section class="sessao-legenda">
                    <div class="caixa-legenda">
                        <h2>Legenda</h2>
                        <section class="legenda">
                            <span class="icone-legenda-ruim material-symbols-outlined">Warning</span>
                            <p>Alerta! <br> Hectare entre 18 e 25 graus e umidade acima de 60%.</p>
                        </section>
                        <section class="legenda">
                            <span class="icone-legenda-medio material-symbols-outlined">Error</span>
                            <p>Atenção! <br>Umidade perto de atigir condições ideais do mildio.</p>
                        </section>
                        <section class="legenda">
                            <span class="icone-legenda-bom material-symbols-outlined">Check</span>
                            <p>Tudo certo! <br>Hectare em condição ideal!</p>
                        </section>
                        <section class="legenda">
                            <span class="icone-legenda-manutencao material-symbols-outlined">Build</span>
                            <p>Manutenção! <br>Ops! parece que houve algum problema com este sensor</p>
                        </section>
                    </div>
                </section>
            </div>
        </aside>
    </div>
</body>
<script data-jsd-embedded data-key="5b0e0c87-af73-45fd-adc6-46268b98e4c6"
    data-base-url="https://jsd-widget.atlassian.com" src="https://jsd-widget.atlassian.com/assets/embed.js"></script>

</html>
<script>
    function mostrarNotificacoes() {
        if (notificacoes.style.display == 'none') {
            notificacoes.style.display = 'block'
        } else {
            notificacoes.style.display = 'none'
        }
    }

    function excluirNotificacao(idNotificacao) {
        idNotificacao.remove();
    }

    function navegar(pagina) {
        window.location.href = pagina;
    }


    const nomePropriedade = sessionStorage.getItem('Propriedade');

    function exibirHectares() {
        fetch(`/dashboard/exibirHectares/${nomePropriedade}`).then(function (resposta) {
            if (resposta.ok) {
                if (resposta.status == 204) {
                    throw "Nenhum resultado encontrado!!";
                }

                resposta.json().then(function (resposta) {
                    console.log("Dados recebidos: ", JSON.stringify(resposta));

                    for (let i = 0; i < resposta.length; i++) {
                        const hectare = resposta[i];

                        
                    }
                });
            } else {
                throw ('Houve um erro na API!');
            }
        }).catch(function (resposta) {
            console.error(resposta);
        });
    }

    function exibirAreaFazenda() {
        fetch(`/dashboard/exibirAreaFazenda/${nomePropriedade}`).then(function (resposta) {
            if (resposta.ok) {
                if (resposta.status == 204) {
                    throw "Nenhum resultado encontrado!!";
                }

                resposta.json().then(function (resposta) {
                    console.log("Dados recebidos: ", JSON.stringify(resposta));

                    for (let i = 0; i < resposta.length; i++) {
                        const hectare = resposta[i];

                        
                    }
                });
            } else {
                throw ('Houve um erro na API!');
            }
        }).catch(function (resposta) {
            console.error(resposta);
        });
    }



    
    function BuscarHectares(){
        fetch("/Hectares/BuscarHectares", {
                  method: "GET"
                })
                  .then(function (resposta) {
                    console.log("resposta: ", resposta);

                    if (resposta.ok) {
                        resposta.json().then(json => {
                        console.log(json);
                        console.log(JSON.stringify(json));

                        Numero_Hectare = 0
                        for(let Quantidade_de_Hectare = 0; Quantidade_de_Hectare < json.length; Quantidade_de_Hectare++){
                            Numero_Hectare++
                            console.log(Quantidade_de_Hectare)

                            if(Numero_Hectare == 1){
                                ListaHectares.innerHTML = `
                            <div class="caixa-hectare" id="Hectare${Numero_Hectare}" onclick = "navegar('grafico/index.html')">
                                <section class="situacao-hectare boa">
                                    <span class="icone-situacao material-symbols-outlined">Check</span>
                                    <p>18ºC</p>
                                    <p>60%</p>
                                </section>
                                <p>Hectare ${Numero_Hectare}</p>
                            </div>
                            `
                            } else{

                                ListaHectares.innerHTML += `
                                <div class="caixa-hectare" id="Hectare${Numero_Hectare}">
                                    <section class="situacao-hectare manutencao">
                                        <span class="icone-situacao material-symbols-outlined">Build</span>
                                        <p>0ºC</p>
                                        <p>0%</p>
                                    </section>
                                    <p>Hectare ${Numero_Hectare}</p>
                                </div>
                                `
                            }

                            if(Quantidade_de_Hectare % 3 == 0){
                                ListaHectares.innerHTML += "<br>"
                            }
                        }
                        
                        });

                    } else {
                      throw "Houve um erro ao tentar realizar ao buscar os hectares";
                    }
                  })
                  .catch(function (resposta) {
                    console.log(`#ERRO: ${resposta}`);

                  });

                return false;
    }

    // const hectareDash = document.getElementById('Hectare1');

    // hectareDash.
</script>